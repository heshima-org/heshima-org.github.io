<div id="menu">
  <ul class="menu">
    {% for item in site.menu %}
      {% assign node = site.pages | where: "url", item.link | first: %}
      <li {% if item.link == page.url %}class="active" {% endif %}>
        <a href="{{ item.link }}"><span>{{ item.label | default: node.title | default: item.link }}</span></a>
        {% if item.menu %}
          <div>
            <ul>
              {% for child in item.menu %}
                {% assign node = site.pages | where: "url", child.link | first: %}
                <li><a href="{{ child.link }}"><span>{{ child.label | default: node.title | default: child.link }}</span></a></li>
              {% endfor %}
            </ul>
          </div>
        {% endif %}
      </li>
    {% endfor %}
  </ul>
</div>
